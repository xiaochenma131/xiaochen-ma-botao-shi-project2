{"ast":null,"code":"const shipLengths = [5, 4, 3, 3, 2];\nconst defaultState = [['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', ''], ['', '', '', '', '', '', '', '', '', '']];\n\nfunction randomizeBoard(emptyArray, shipsArray) {\n  const randomizedBoard = emptyArray.map(inner => inner.slice());\n\n  for (let shipLength of shipsArray) {\n    let row = Math.floor(Math.random() * 10);\n    let col = Math.floor(Math.random() * 10);\n    const BOUNDARY = 10;\n    let boundaryFlag = 1;\n\n    while (boundaryFlag === 1) {\n      boundaryFlag = 0;\n\n      for (let i = col; i < col + shipLength; i++) {\n        if (i === BOUNDARY || randomizedBoard[row][i] === 'ship') {\n          boundaryFlag = 1;\n          break;\n        }\n      }\n\n      if (boundaryFlag === 0) {\n        break;\n      }\n\n      row = Math.floor(Math.random() * 10);\n      col = Math.floor(Math.random() * 10);\n    }\n\n    randomizedBoard[row].fill('ship', col, col + shipLength);\n  }\n\n  return randomizedBoard;\n}\n\nexport default function enemyBoardReducer(state = randomizeBoard(defaultState, shipLengths), action) {\n  if (action.type === 'enemyBoardClick') {\n    const value = state[action.x][action.y];\n\n    if (value === '') {\n      state[action.x][action.y] = 'miss';\n    } else if (value === 'ship') {\n      state[action.x][action.y] = 'hit';\n    }\n\n    return [...state];\n  }\n\n  if (action.type === 'reset') {\n    state = randomizeBoard(defaultState, shipLengths);\n    return [...state];\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/Users/xiaochenma/Desktop/xiaochen-ma-botao-shi-project2/src/reducers/enemyBoardReducer.js"],"names":["shipLengths","defaultState","randomizeBoard","emptyArray","shipsArray","randomizedBoard","map","inner","slice","shipLength","row","Math","floor","random","col","BOUNDARY","boundaryFlag","i","fill","enemyBoardReducer","state","action","type","value","x","y"],"mappings":"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","sourcesContent":["const shipLengths = [5, 4, 3, 3, 2];\n\nconst defaultState = [\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n    ['', '', '', '', '', '', '', '', '', ''],\n];\n\nfunction randomizeBoard(emptyArray, shipsArray) {\n    const randomizedBoard = emptyArray.map(inner => inner.slice());\n\n    for (let shipLength of shipsArray) {\n        let row = Math.floor(Math.random() * 10);\n        let col = Math.floor(Math.random() * 10);\n        const BOUNDARY = 10;\n        let boundaryFlag = 1;\n        while (boundaryFlag === 1) {\n            boundaryFlag = 0;\n            for (let i = col; i < col + shipLength; i++) {\n                if (i === BOUNDARY || randomizedBoard[row][i] === 'ship') {\n                    boundaryFlag = 1;\n                    break;\n                }\n            }\n            if (boundaryFlag === 0) {\n                break;\n            }\n            row = Math.floor(Math.random() * 10);\n            col = Math.floor(Math.random() * 10);\n        }\n\n        randomizedBoard[row].fill('ship', col, col + shipLength);\n    }\n    return randomizedBoard;\n}\n\nexport default function enemyBoardReducer(\n    state = randomizeBoard(defaultState, shipLengths), action\n) {\n    if (action.type === 'enemyBoardClick') {\n        const value = state[action.x][action.y];\n        if (value === '') {\n            state[action.x][action.y] = 'miss';\n        } else if (value === 'ship') {\n            state[action.x][action.y] = 'hit';\n        }\n        return [...state];\n    }\n    if (action.type === 'reset') {\n        state = randomizeBoard(defaultState, shipLengths);\n        return [...state];\n    }\n    return state;\n}"]},"metadata":{},"sourceType":"module"}